<!DOCTYPE html>
<html lang="en" ng-controller="AppController as app" class="loading hide-live-agent">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <meta http-equiv="Last-Modified" content="%BUILD_OVERRIDE_LAST_MODIFIED%">
    <title>HEAT %BUILD_OVERRIDE_VERSION%</title>
    <style>
      html, body { height: 100%; }
      md-input-container .md-errors-spacer { min-height: 0; }
      md-sidenav { max-width: 280px !important; }
      md-toolbar.main-toolbar .md-toolbar-tools { height: inherit !important; }
    </style>
    <!-- build:inlinecss -->
    <link rel='stylesheet' href='loading/loading.css'>
    <!-- endbuild -->
    <!-- build:inlinejs -->
    <script src="loading/loading.js"></script>
    <!-- endbuild -->

  </head>
  <body>

    <div class="application-loading-animation-container" hide show-gt-xs>
      <div>
        <svg class="spinner" width="65px" height="65px" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
          <circle class="path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
        </svg>
      </div>
      <div id="application-loading-text-container">Loading Heat Wallet&nbsp;<elipses-loading></elipses-loading></div>
    </div>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto+Sans:400,500,700">
    <link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Roboto'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- build:css material.css -->
    <link rel="stylesheet" href="../node_modules/angular-material/angular-material.css">
    <link rel="stylesheet" href="../node_modules/ng-popover/dist/angular-popover.css">
    <!-- endbuild -->
    <!-- custom css -->
    <link rel="stylesheet" href="styles/index.css">

    <div layout="column" flex layout-fill class="application-content" ng-if="showApp">
      <div layout="column" flex layout-fill hide-gt-xs layout-align="start center" layout-padding class="mobile-notice">
        <p>The HEAT desktop wallet is optimized for desktop/tablet use only.</p>
        <p>Please check back later when our mobile apps (IOS/Android) have been released.</p>
        <p><a href="http://heatledger.com">heatledger.com</a></p>
      </div>
      <div layout="row" flex  layout-fill hide show-gt-xs>
        <div flex layout-fill layout="column">
          <downloading-blockchain></downloading-blockchain>
          <toolbar></toolbar>
          <div ng-viewport flex layout-fill layout="column"></div>
        </div>
      </div>
    </div>

    <!-- Google Addwords Conversion tracker runs in its separated domain for security reasons-->
    <!-- <iframe src="https://heatwallet.com/secure-addwords-iframe.html"
      style="width:0; height:0; border:0; border:none" id="secure-addwords-iframe"
      sandbox="allow-scripts"></iframe>
    <script>
      /**
       * We call the global gtag method which in turn calls the google gtag function
       * which was loaded in the shielded off iframe, the only way to talk to the iframe
       * is through sending message events for which the iframe is listening.
       *
       * @param message { type: [signup|bid], transaction_id: string }
       * */
      function gtag_SECURE(message) {
        let win = document.getElementById('secure-addwords-iframe').contentWindow
        win.postMessage(message, '*')
      }
      function gtag_report_conversion_bid_SECURE(url, transaction_id) {
        gtag_SECURE({type:'bid', transaction_id: Date.now()+''})
      }
      function gtag_report_conversion_signup_SECURE(url) {
        gtag_SECURE({type:'signup'})
      }
    </script> -->

    <!-- Or alternatively we can use the version where the tracker code runs in the SECURE context -->
    <!-- <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
        console.log('gtag', arguments)
      }
      gtag('js', new Date());
      gtag('config', 'AW-876749157');
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-876749157"></script>
    <script>
      function gtag_report_conversion_bid(url, transaction_id) {
        var callback = function () {
          if (typeof (url) != 'undefined') {
            window.location = url;
          }
        };
        gtag('event', 'conversion', {
          'send_to': 'AW-876749157/hwIsCOPB1IABEOXCiKID',
          'transaction_id': transaction_id,
          'event_callback': callback
        });
        return false;
      }
    </script>
    <script>
      function gtag_report_conversion_signup(url) {
        var callback = function () {
          if (typeof (url) != 'undefined') {
            window.location = url;
          }
        };
        gtag('event', 'conversion', {
          'send_to': 'AW-876749157/_PMbCNml1IABEOXCiKID',
          'event_callback': callback
        });
        return false;
      }
    </script> -->

  </body>

  <script type="text/ng-template" id="error-messages">
    <div ng-message="required">This field is required</div>
    <div ng-message="minlength">This field is too short</div>
    <div ng-message="parse">Invalid contents</div>
  </script>

  <!-- NOTE! In order to NOT have the core modules load in a different way when
       loaded in Electron (nodejs) env as compared to loading in a browser env.
       We hide the window.require and window.module at the start of
       node_modules.js and restore them at the end. -->

  <!-- build:js node_modules.js -->
  <script src="../app/node_helpers/make-nodejs-hidden.js" defer></script>
  <script src="../node_modules/angular/angular.js" defer></script>
  <script src="../node_modules/angular-new-router/dist/router.es5.js" defer></script>
  <script src="../node_modules/angular-animate/angular-animate.js" defer></script>
  <script src="../node_modules/angular-aria/angular-aria.js" defer></script>
  <script src="../node_modules/angular-material/angular-material.js" defer></script>
  <script src="../node_modules/angular-sanitize/angular-sanitize.js" defer></script>
  <script src="../node_modules/angular-messages/angular-messages.js" defer></script>
  <script src="../node_modules/angular-scroll/angular-scroll.js" defer></script>
  <script src="../node_modules/pako/dist/pako.min.js" defer></script>
  <script src="../node_modules/dateformat/lib/dateformat.js" defer></script>
  <script src="../node_modules/filesaver.js/FileSaver.js" defer></script>
  <script src="../node_modules/long/dist/long.js" defer></script>
  <script src="../node_modules/bytebuffer/dist/bytebuffer.js" defer></script>
  <script src="../node_modules/big.js/big.min.js" defer></script>
  <script src="../node_modules/jsonformatter/dist/json-formatter.min.js" defer></script>
  <script src="../node_modules/angularjs-scroll-glue/src/scrollglue.js" defer></script>
  <script src="../node_modules/ng-popover/dist/angular-popover.min.js" defer></script>
  <script src="../app/node_helpers/make-dcodeIO-bytebuffer-global.js" defer></script>
  <script src="../app/node_helpers/make-nodejs-visible.js" defer></script>

  <script src="../app/node_helpers/make-nodejs-hidden.js" defer></script>
  <script src="../app/src/web3/web3-custom.js" defer></script>
  <script src="../app/node_helpers/make-nodejs-visible.js" defer></script>

  <script src="../app/node_helpers/make-nodejs-hidden.js" defer></script>
  <script src="../app/src/web3/lightwallet-custom.js" defer></script>
  <script src="../node_modules/hooked-web3-provider/build/hooked-web3-provider.min.js" defer></script>
  <script src="../app/node_helpers/make-nodejs-visible.js" defer></script>
  <!-- endbuild -->

  <!-- build:chart charting.js -->
  <script src="../app/node_helpers/make-nodejs-hidden.js" defer></script>
  <script src="../node_modules/d3/build/d3.min.js" defer></script>
  <script src="../node_modules/techan/dist/techan.js" defer></script>
  <script src="../app/node_helpers/make-nodejs-visible.js" defer></script>
  <!-- endbuild -->

  <script src="lib.js" defer></script>
  <script src="tshelpers.js" defer></script>
  <script src="heat-ui.js" defer></script>
  <script type="text/javascript">
    document.addEventListener("DOMContentLoaded", function() {
      new heat.Loader();

      // /* TEST THE TAGS */
      // gtag({type:'signup'})
      // gtag({type:'bid', transaction_id: Date.now()+''})
    });
  </script>
  <script type="text/javascript" defer>
    /*
    document.addEventListener("DOMContentLoaded", function() {
      (function(d, src, c) { var t=d.scripts[d.scripts.length - 1],s=d.createElement('script');s.id='la_x2s6df8d';s.async=true;s.src=src;s.onload=s.onreadystatechange=function(){var rs=this.readyState;if(rs&&(rs!='complete')&&(rs!='loaded')){return;}c(this);};t.parentElement.insertBefore(s,t.nextSibling);})(document,
      'https://heatledger.ladesk.com/scripts/track.js',
      function(e){
        var button = LiveAgent.createButton('837d4f1c', e);
        angular.element(document).find('head').append(`
          <style type="text/css">
            html.hide-live-agent #${button.elementId} {
              display: none;
            }
          </style>
        `);
      });
    });
    */
  </script>
</html>
